# 0.5.2 Fix NextJS multiple router refresh bug
- fix a bug that was causing the NextJS router to refresh multiple times post-login

# 0.5.1 Fix issue with typescript config
- allow cookies to be partially defined in the config

# 0.5.0 NextJS fetch user fixes & basePath config support
- when the NextJS provider loads if the user is already authenticated the user should be available immediately
- block UI display correctly in iframe when the SDK loads in app during NextJS flow
- use useIsClient from usehooks-ts
- add support for a basePath config  where it was not being correctly applied to the logout callback URL

# 0.4.7 Standalone react fixes
- Fix case where standalone react app isn't recognising existing session
- Fix react standalone case where it's initiating startSignIn twice leading to duplicate calls to the auth-server
- Add refresh timeout in useSignIn for initial signIn call so that the code-verifier doesn't get stale if the user leaves the tab open on a page and doesn't sign in right away

# 0.4.6 Refresh fixes
- if a valid refresh token exists, automatically try to re-hydrate the user's session by doing an oauth refresh

# 0.4.5 Block display fix
- if the iframe has already been used on a page and it's re-opened we shouldn't show the previous app content

# 0.4.4 Custom civic iframe resizer (fix)
- use a custom civic-iframe-resizer to avoid the problems and warnings with the commercial resizer
- fix positioning of iframe overlay

# 0.4.3 Custom civic iframe resizer
- use a custom civic-iframe-resizer to avoid the problems and warnings with the commercial resizer

# 0.4.2 Download iframe-resizer & fix infinite redirect loop in NextJS
- download iframe-resizer lib as it was failing to resize on load
- don't use dynamic API in NextJS middleware as it's not supported

# 0.4.1 NextJS server function token validation
- add existing validation to NextJS server functions, getUser and getTokens. Also exposes a new NextJS server function 'isLoggedIn'
  
# 0.4.0 server-side token validation
- add server-side token validation to any calls to check whether the user is authenticated
- implement and expose a server/CivicAuth class that exposes methods without needing to add config and storage to every call

# 0.3.8 Fix NextJS cookie expiration behaviour
- fix the civic-auth SDK NextJS cookie expiration behaviour for embedded iframes: when the iframe mounts, it will trigger the auto sign-in process to start again
- change NextJS console.logs to logger.debug statements

# 0.3.7 Fix user auth refresh
- Fix issue where a 500 occurred during token refresh
- UI fixes 

# 0.3.6 Remove CJS build
- Remove CommonJS build from @civic/auth

# 0.3.5 NextJS middleware redirect fix + Iframe padding + use-client fixes
- remove padding and background colours on iframe wrapper: the login-app must handle its own padding and background colour to support light/dark mode
- fix issue where 'use client' was required to use the CivicProvider in react apps
- fix NextJS middleware so that visiting a page with an expired idToken doesn't trigger a redirect loop
- accept design options messages from the login-app via postMessage in order to set the color-mode for the iframe chrome

# 0.3.4 Refresh bugfix, Update User type
- Update User type to correctly support type extensions
- User Button: Show a loading state if the user initiates an action and is authenticating or signing out
- Prevent multiple in-flight refresh requests

# 0.3.3 fix user cookie refresh
- Ensured that the critical path "/api/auth/**" is always included in the exclude list, enhancing security by preventing accidental exposure of authentication endpoints
- Allowed the include list to be completely replaced by user-provided configurations, maintaining flexibility without compromising security.

# 0.3.1 iframe-modal mode start authentication in background
- for displayMode = 'iframe', start authentication in the background on page load for fast perceived login-app loading
- upgrade iframe resizer to 5.3.3
- fix bug in NextJSCookies storage where the call to cookies() wasn't awaited

# 0.3.0 iframe resizer support
- add support for auto-resizing the login-app iframe using the react iframe resizer library
- rename NextKS cookie EXPIRES_IN -> ACCESS_TOKEN_EXPIRES_AT
- user session fixes
- export civic auth logger in exports
- fix peerDependenciesMeta to make react and next both optional
- fix compilation to only include src directory

# 0.2.5 fix idToken retrieval from cookie storage
- fix a bug where the client was trying to retrieve the idToken using the server-only cookies() method
- fix an issue with the build including the src and test files in the package

# 0.2.4 fix multiple auth-signIn calls
- fix a bug where signIn is called multiple times in embedded iframe mode

# 0.2.3 remove unnecessary logging
- remove unnecessary logging

# 0.2.2 authStatus and UserButton updates
- expose authStatus value from useUser
- show loading icon in UserButton, SignInButton and SignOutButton during sign in and sign out

# 0.2.1 Server getTokens
- expose server/getTokens function
- remove unused SDK exports
- Add support for showing error messages in the IDP
  
# 0.2.0 Refresh and Logout improvements
- improve the token auto-refresh funcionality
- improve logout functionality and added redirect on logout

# 0.1.6 Fix printVersion usage
- Only print the SDK version once
- fix useUserCookie re-rendering too often
- add auto-refresh to nextjs and standalone providers

# 0.1.5 Logout updates and faster user cookie retrieval
- Implement client & auth-server logout functionality to invalidate tokens on logout
- fetch the user on component mount for faster useUserCookie user retrieval

# 0.1.4 Refactor hooks and providers    
- Refactor the internal hooks and providers implementation
- change modalIframe prop to new iframeMode that can be either 'embedded' or 'modal' (default)
- output the current lib version to the command line

# 0.1.3 Update README
- Synchronise the README with docs.civic.com

# 0.1.2 Fix AuthConfig defaults
- Update AuthConfig type to make oauthServer optional
- Export AuthConfig type from server
- Make next an optional rather than a peer dependency

# 0.1.1 Fix Firefox loading overlay issues
- Iframe loading overlay was obscuring loaded login app in Firefox

# 0.1.0 Initial release
- Authentication using PKCE for standalone ReactJS and NextJS apps
