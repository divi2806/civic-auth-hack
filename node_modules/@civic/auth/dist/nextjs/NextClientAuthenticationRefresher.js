import { BrowserAuthenticationRefresher } from "../shared/lib/BrowserAuthenticationRefresher.js";
export class NextClientAuthenticationRefresher extends BrowserAuthenticationRefresher {
    static async build(authConfig, storage, onError) {
        const refresher = new NextClientAuthenticationRefresher(authConfig, storage, onError);
        return refresher;
    }
    async refreshAccessToken() {
        if (!this.authConfig)
            throw new Error("No auth config available");
        if (!this.authConfig.refreshUrl)
            throw new Error("No refresh URL available");
        try {
            const res = await fetch(this.authConfig.refreshUrl);
            const json = await res.json();
            return json.tokens;
        }
        catch (error) {
            console.error("NextClientAuthenticationRefresher refreshAccessToken: Failed to refresh tokens:", error);
            this.onError(error);
            throw error;
        }
    }
}
//# sourceMappingURL=NextClientAuthenticationRefresher.js.map