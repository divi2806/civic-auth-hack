import { AuthenticationRefresherImpl } from "../shared/lib/AuthenticationRefresherImpl.js";
import { storeServerTokens } from "../shared/lib/util.js";
export class NextServerAuthenticationRefresherImpl extends AuthenticationRefresherImpl {
    endpointOverrides;
    storage;
    constructor(authConfig, storage, onError, endpointOverrides) {
        super(authConfig, storage, onError, endpointOverrides);
        this.endpointOverrides = endpointOverrides;
        this.storage = storage;
    }
    async storeTokens(tokenResponseBody) {
        if (!this.storage)
            throw new Error("No storage available");
        await storeServerTokens(this.storage, tokenResponseBody);
    }
    static async build(authConfig, storage, onError, endpointOverrides) {
        const refresher = new NextServerAuthenticationRefresherImpl(authConfig, storage, onError, endpointOverrides);
        await refresher.init();
        return refresher;
    }
}
//# sourceMappingURL=NextServerAuthenticationRefresherImpl.js.map