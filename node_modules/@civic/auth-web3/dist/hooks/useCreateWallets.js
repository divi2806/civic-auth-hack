import { useCallback, useState } from "react";
// a callback that creates wallets for the user
// and triggers a login
export const useCreateWallets = (web3Client) => {
    const [walletCreationInProgress, setWalletCreationInProgress] = useState(false);
    const [error, setError] = useState(null);
    const [createWalletFinished, setCreateWalletFinished] = useState(false);
    const createWallet = useCallback(async () => {
        setWalletCreationInProgress(true);
        try {
            await web3Client?.createWallets();
            setCreateWalletFinished(true);
        }
        catch (e) {
            console.error(e);
            setError(e);
            // Check if this is the embedded wallet disabled error
            if (e instanceof Error &&
                e.message.includes("Embedded wallet feature is disabled")) {
                console.warn("Embedded wallet feature is disabled. To enable it, go to the Crypto Wallets section in your Civic Auth Dashboard.");
            }
            setWalletCreationInProgress(false);
        }
    }, [web3Client]);
    return {
        createWallet,
        createWalletFinished,
        walletCreationInProgress,
        error,
    };
};
//# sourceMappingURL=useCreateWallets.js.map