{"version":3,"file":"useCreateWallets.js","sourceRoot":"","sources":["../../src/hooks/useCreateWallets.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAG9C,+CAA+C;AAC/C,uBAAuB;AACvB,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAAC,UAA6B,EAAE,EAAE;IAChE,MAAM,CAAC,wBAAwB,EAAE,2BAA2B,CAAC,GAC3D,QAAQ,CAAC,KAAK,CAAC,CAAC;IAClB,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAe,IAAI,CAAC,CAAC;IACvD,MAAM,CAAC,oBAAoB,EAAE,uBAAuB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAExE,MAAM,YAAY,GAAG,WAAW,CAAC,KAAK,IAAI,EAAE;QAC1C,2BAA2B,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC;YACH,MAAM,UAAU,EAAE,aAAa,EAAE,CAAC;YAClC,uBAAuB,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACjB,QAAQ,CAAC,CAAU,CAAC,CAAC;YAErB,sDAAsD;YACtD,IACE,CAAC,YAAY,KAAK;gBAClB,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,qCAAqC,CAAC,EACzD,CAAC;gBACD,OAAO,CAAC,IAAI,CACV,mHAAmH,CACpH,CAAC;YACJ,CAAC;YAED,2BAA2B,CAAC,KAAK,CAAC,CAAC;QACrC,CAAC;IACH,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;IAEjB,OAAO;QACL,YAAY;QACZ,oBAAoB;QACpB,wBAAwB;QACxB,KAAK;KACN,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import { useCallback, useState } from \"react\";\nimport type { Web3Client } from \"../lib/Web3Client.js\";\n\n// a callback that creates wallets for the user\n// and triggers a login\nexport const useCreateWallets = (web3Client: Web3Client | null) => {\n  const [walletCreationInProgress, setWalletCreationInProgress] =\n    useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const [createWalletFinished, setCreateWalletFinished] = useState(false);\n\n  const createWallet = useCallback(async () => {\n    setWalletCreationInProgress(true);\n    try {\n      await web3Client?.createWallets();\n      setCreateWalletFinished(true);\n    } catch (e) {\n      console.error(e);\n      setError(e as Error);\n\n      // Check if this is the embedded wallet disabled error\n      if (\n        e instanceof Error &&\n        e.message.includes(\"Embedded wallet feature is disabled\")\n      ) {\n        console.warn(\n          \"Embedded wallet feature is disabled. To enable it, go to the Crypto Wallets section in your Civic Auth Dashboard.\",\n        );\n      }\n\n      setWalletCreationInProgress(false);\n    }\n  }, [web3Client]);\n\n  return {\n    createWallet,\n    createWalletFinished,\n    walletCreationInProgress,\n    error,\n  };\n};\n"]}