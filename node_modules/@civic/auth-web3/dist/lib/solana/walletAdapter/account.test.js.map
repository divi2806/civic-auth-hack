{"version":3,"file":"account.test.js","sourceRoot":"","sources":["../../../../src/lib/solana/walletAdapter/account.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { describe, it, expect } from \"vitest\";\nimport { CivicWalletAccount } from \"./account.js\";\nimport { SOLANA_CHAINS } from \"./solana.js\";\nimport {\n  SolanaSignAndSendTransaction,\n  SolanaSignTransaction,\n  SolanaSignMessage,\n} from \"@solana/wallet-standard-features\";\n\nconst testAddress = \"test-address\";\nconst testPublicKey = new Uint8Array([1, 2, 3]);\nconst testLabel = \"test-label\";\nconst testIcon = \"data:image/svg+xml;base64,bla\";\n\ndescribe(\"CivicWalletAccount\", () => {\n  const account = new CivicWalletAccount({\n    address: testAddress,\n    publicKey: testPublicKey,\n    label: testLabel,\n    icon: testIcon,\n  });\n\n  it(\"should return correct address, label, and icon\", () => {\n    expect(account.address).toBe(testAddress);\n    expect(account.label).toBe(testLabel);\n    expect(account.icon).toBe(testIcon);\n  });\n\n  it(\"should return copies for publicKey, chains, and features\", () => {\n    // Test publicKey copy\n    const pk1 = account.publicKey;\n    const pk2 = account.publicKey;\n    expect(pk1).toEqual(testPublicKey);\n    expect(pk1).not.toBe(testPublicKey);\n    expect(pk1).not.toBe(pk2);\n\n    // Test chains copy\n    const chains1 = account.chains;\n    const chains2 = account.chains;\n    expect(chains1).toEqual(SOLANA_CHAINS);\n    expect(chains1).not.toBe(SOLANA_CHAINS);\n    expect(chains1).not.toBe(chains2);\n\n    // Test features copy\n    const features1 = account.features;\n    const features2 = account.features;\n    const expectedFeatures = [\n      SolanaSignAndSendTransaction,\n      SolanaSignTransaction,\n      SolanaSignMessage,\n    ];\n    expect(features1).toEqual(expectedFeatures);\n    expect(features1).not.toBe(expectedFeatures);\n    expect(features1).not.toBe(features2);\n  });\n\n  it(\"should be frozen\", () => {\n    expect(Object.isFrozen(account)).toBe(true);\n  });\n\n  it(\"should not allow modification of the publicKey copy to affect internal state\", () => {\n    const pkCopy = account.publicKey;\n    pkCopy[0] = 99;\n    expect(account.publicKey[0]).toBe(testPublicKey[0]);\n  });\n});\n"]}