import { describe, it, expect } from "vitest";
import { CivicWalletAccount } from "./account.js";
import { SOLANA_CHAINS } from "./solana.js";
import { SolanaSignAndSendTransaction, SolanaSignTransaction, SolanaSignMessage, } from "@solana/wallet-standard-features";
const testAddress = "test-address";
const testPublicKey = new Uint8Array([1, 2, 3]);
const testLabel = "test-label";
const testIcon = "data:image/svg+xml;base64,bla";
describe("CivicWalletAccount", () => {
    const account = new CivicWalletAccount({
        address: testAddress,
        publicKey: testPublicKey,
        label: testLabel,
        icon: testIcon,
    });
    it("should return correct address, label, and icon", () => {
        expect(account.address).toBe(testAddress);
        expect(account.label).toBe(testLabel);
        expect(account.icon).toBe(testIcon);
    });
    it("should return copies for publicKey, chains, and features", () => {
        // Test publicKey copy
        const pk1 = account.publicKey;
        const pk2 = account.publicKey;
        expect(pk1).toEqual(testPublicKey);
        expect(pk1).not.toBe(testPublicKey);
        expect(pk1).not.toBe(pk2);
        // Test chains copy
        const chains1 = account.chains;
        const chains2 = account.chains;
        expect(chains1).toEqual(SOLANA_CHAINS);
        expect(chains1).not.toBe(SOLANA_CHAINS);
        expect(chains1).not.toBe(chains2);
        // Test features copy
        const features1 = account.features;
        const features2 = account.features;
        const expectedFeatures = [
            SolanaSignAndSendTransaction,
            SolanaSignTransaction,
            SolanaSignMessage,
        ];
        expect(features1).toEqual(expectedFeatures);
        expect(features1).not.toBe(expectedFeatures);
        expect(features1).not.toBe(features2);
    });
    it("should be frozen", () => {
        expect(Object.isFrozen(account)).toBe(true);
    });
    it("should not allow modification of the publicKey copy to affect internal state", () => {
        const pkCopy = account.publicKey;
        pkCopy[0] = 99;
        expect(account.publicKey[0]).toBe(testPublicKey[0]);
    });
});
//# sourceMappingURL=account.test.js.map