{"version":3,"file":"discovery.js","sourceRoot":"","sources":["../../../src/lib/ethereum/discovery.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,MAAM,EAAE,MAAM,cAAc,CAAC;AACtC,OAAO,EAAE,IAAI,EAAE,MAAM,mBAAmB,CAAC;AAEzC,MAAM,YAAY,GAAG;IACnB,IAAI,EAAE,sCAAsC;IAC5C,IAAI,EAAE,cAAc;IACpB,IAAI,EAAE,IAAI;IACV,IAAI,EAAE,WAAW;CAClB,CAAC;AAEF,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAAC,QAAyB,EAAE,EAAE;IAC5D,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;QAC3D,mDAAmD;QACnD,OAAO;IACT,CAAC;IAED,MAAM,cAAc,GAAG;QACrB,IAAI,EAAE,YAAY;QAClB,QAAQ;KACT,CAAC;IAEF,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,+BAA+B,EAAE,cAAc,CAAC,CAAC;IAE5E,2BAA2B;IAC3B,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE;QACtB,MAAM,CAAC,aAAa,CAClB,IAAI,WAAW,CAAC,0BAA0B,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,CAAC,CACxE,CAAC;IACJ,CAAC,EAAE,IAAI,CAAC,CAAC;AACX,CAAC,CAAC","sourcesContent":["import type { EIP1193Provider } from \"viem\";\nimport { logger } from \"../logger.js\";\nimport { ICON } from \"../walletUtils.js\";\n\nconst providerInfo = {\n  uuid: \"9c0ce02a-23bd-45b5-a324-5fa1225950ae\",\n  name: \"Civic Wallet\",\n  icon: ICON,\n  rdns: \"com.civic\",\n};\n\nexport const registerProvider = (provider: EIP1193Provider) => {\n  if (typeof window === \"undefined\" || !window.dispatchEvent) {\n    // server-side rendering path - no need to announce\n    return;\n  }\n\n  const providerDetail = {\n    info: providerInfo,\n    provider,\n  };\n\n  logger.web3.provider.debug(\"EIP-6963: Announcing provider\", providerDetail);\n\n  // announce it every second\n  window.setInterval(() => {\n    window.dispatchEvent(\n      new CustomEvent(\"eip6963:announceProvider\", { detail: providerDetail }),\n    );\n  }, 1000);\n};\n"]}