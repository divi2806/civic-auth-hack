{"version":3,"file":"CivicAuthProvider.js","sourceRoot":"","sources":["../../src/nextjs/CivicAuthProvider.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,OAAO,EAAE,iBAAiB,IAAI,qBAAqB,EAAE,MAAM,oBAAoB,CAAC;AAChF,OAAO,KAAK,EAAE,EAAkB,WAAW,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACrE,OAAO,EAAuC,MAAM,aAAa,CAAC;AAClE,OAAO,EAAE,gBAAgB,EAAE,MAAM,mCAAmC,CAAC;AAErE,+DAA+D;AAC/D,iEAAiE;AACjE,MAAM,UAAU,iBAAiB,CAAC,EAChC,QAAQ,EACR,GAAG,KAAK,EACiD;IACzD,oGAAoG;IACpG,8DAA8D;IAC9D,MAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,GAAG,QAAQ,EAAuB,CAAC;IAC5E,MAAM,cAAc,GAAG,WAAW,CAChC,CAAC,QAA6B,EAAE,EAAE,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,EACpE,CAAC,iBAAiB,CAAC,CACpB,CAAC;IAEF,OAAO,CACL,oBAAC,qBAAqB,OAChB,KAAK,EACT,SAAS,EAAE,KAAK,IAAI,EAAE;YACpB,MAAM,cAAc,EAAE,EAAE,CAAC;QAC3B,CAAC;QAED,oBAAC,gBAAgB,IAAC,sBAAsB,EAAE,cAAc,KAAM,KAAK,IAChE,QAAQ,CACQ,CACG,CACzB,CAAC;AACJ,CAAC","sourcesContent":["\"use client\";\nimport { CivicAuthProvider as CivicNextAuthProvider } from \"@civic/auth/nextjs\";\nimport React, { type ReactNode, useCallback, useState } from \"react\";\nimport { type NextCivicAuthWeb3ProviderProps } from \"../types.js\";\nimport { Web3UserProvider } from \"../components/Web3UserProvider.js\";\n\n// A wrapper around civic auth that injects an embedded wallet.\n// TODO remove this and just use components/CivicAuthProvider.tsx\nexport function CivicAuthProvider({\n  children,\n  ...props\n}: NextCivicAuthWeb3ProviderProps & { children: ReactNode }) {\n  // allow the embedded wallet to add a hook to the logout process, ensuring its state gets cleaned up\n  // for security reasons, and to avoid bugs when changing users\n  const [logoutCallback, setLogoutCallback] = useState<() => Promise<void>>();\n  const registerLogout = useCallback(\n    (callback: () => Promise<void>) => setLogoutCallback(() => callback),\n    [setLogoutCallback],\n  );\n\n  return (\n    <CivicNextAuthProvider\n      {...props}\n      onSignOut={async () => {\n        await logoutCallback?.();\n      }}\n    >\n      <Web3UserProvider registerLogoutCallback={registerLogout} {...props}>\n        {children}\n      </Web3UserProvider>\n    </CivicNextAuthProvider>\n  );\n}\n"]}