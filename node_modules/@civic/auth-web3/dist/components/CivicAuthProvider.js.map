{"version":3,"file":"CivicAuthProvider.js","sourceRoot":"","sources":["../../src/components/CivicAuthProvider.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,OAAO,EAAE,iBAAiB,IAAI,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AACnF,OAAO,KAAK,EAAE,EAAkB,WAAW,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACrE,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzD,OAAO,EAAmC,MAAM,aAAa,CAAC;AAE9D,+DAA+D;AAC/D,wCAAwC;AACxC,MAAM,UAAU,iBAAiB,CAAC,EAChC,QAAQ,EACR,GAAG,KAAK,EAC6C;IACrD,oGAAoG;IACpG,8DAA8D;IAC9D,MAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,GAAG,QAAQ,EAAuB,CAAC;IAC5E,MAAM,cAAc,GAAG,WAAW,CAChC,CAAC,QAA6B,EAAE,EAAE,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,EACpE,CAAC,iBAAiB,CAAC,CACpB,CAAC;IAEF,OAAO,CACL,oBAAC,yBAAyB,OACpB,KAAK,EACT,SAAS,EAAE,KAAK,IAAI,EAAE;YACpB,MAAM,cAAc,EAAE,EAAE,CAAC;QAC3B,CAAC;QAED,oBAAC,gBAAgB,IAAC,sBAAsB,EAAE,cAAc,KAAM,KAAK,IAChE,QAAQ,CACQ,CACO,CAC7B,CAAC;AACJ,CAAC","sourcesContent":["\"use client\";\nimport { CivicAuthProvider as InternalCivicAuthProvider } from \"@civic/auth/react\";\nimport React, { type ReactNode, useCallback, useState } from \"react\";\nimport { Web3UserProvider } from \"./Web3UserProvider.js\";\nimport { type CivicAuthWeb3ProviderProps } from \"../types.js\";\n\n// A wrapper around civic auth that injects an embedded wallet.\n// TODO should be in the reactjs/ folder\nexport function CivicAuthProvider({\n  children,\n  ...props\n}: CivicAuthWeb3ProviderProps & { children: ReactNode }) {\n  // allow the embedded wallet to add a hook to the logout process, ensuring its state gets cleaned up\n  // for security reasons, and to avoid bugs when changing users\n  const [logoutCallback, setLogoutCallback] = useState<() => Promise<void>>();\n  const registerLogout = useCallback(\n    (callback: () => Promise<void>) => setLogoutCallback(() => callback),\n    [setLogoutCallback],\n  );\n\n  return (\n    <InternalCivicAuthProvider\n      {...props}\n      onSignOut={async () => {\n        await logoutCallback?.();\n      }}\n    >\n      <Web3UserProvider registerLogoutCallback={registerLogout} {...props}>\n        {children}\n      </Web3UserProvider>\n    </InternalCivicAuthProvider>\n  );\n}\n"]}